\hypertarget{_attitude_estimation_8c}{}\section{C\+:/\+Users/galey/\+Documents/\+Mechanical/\+Mech\+\_\+\+Lib/\+Attitude\+Estimation.c File Reference}
\label{_attitude_estimation_8c}\index{C:/Users/galey/Documents/Mechanical/Mech\_Lib/AttitudeEstimation.c@{C:/Users/galey/Documents/Mechanical/Mech\_Lib/AttitudeEstimation.c}}


\+: Source file for the Attitud\+Estimation module.  


{\ttfamily \#include $<$Attitude\+Estimation.\+h$>$}\newline
{\ttfamily \#include $<$Reference\+Frames.\+h$>$}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{_attitude_estimation_8c_a0949e379a3d6c80cfee8a3ed5146b04e}\label{_attitude_estimation_8c_a0949e379a3d6c80cfee8a3ed5146b04e}} 
\#define {\bfseries K\+P\+\_\+\+M\+A\+G\+\_\+\+B\+A\+SE}~1.\+0
\item 
\mbox{\Hypertarget{_attitude_estimation_8c_aa6d7ab3251868a8cbab5fba0042a4343}\label{_attitude_estimation_8c_aa6d7ab3251868a8cbab5fba0042a4343}} 
\#define {\bfseries K\+I\+\_\+\+M\+A\+G\+\_\+\+B\+A\+SE}~0.\+3
\item 
\mbox{\Hypertarget{_attitude_estimation_8c_a58273a5842a76db8d4b2c7e7d2c9287f}\label{_attitude_estimation_8c_a58273a5842a76db8d4b2c7e7d2c9287f}} 
\#define {\bfseries K\+P\+\_\+\+S\+V\+\_\+\+B\+A\+SE}~1.\+0
\item 
\mbox{\Hypertarget{_attitude_estimation_8c_a9c5a4e6091b299aecda1ecdadc38bfcc}\label{_attitude_estimation_8c_a9c5a4e6091b299aecda1ecdadc38bfcc}} 
\#define {\bfseries K\+I\+\_\+\+S\+V\+\_\+\+B\+A\+SE}~0.\+3
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{_attitude_estimation_8c_af3787f9ac84c74879bf0be115620c91b}{find\+Rexp}} (\mbox{\hyperlink{struct___matrix}{Matrix}} w, \mbox{\hyperlink{struct___matrix}{Matrix}} Rexp)
\begin{DoxyCompactList}\small\item\em Finds the exponential Rodrigues parameter form of an angular velocity vector. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{_attitude_estimation_8c_a0a506172562a18056bf5908cfd8e945a}\label{_attitude_estimation_8c_a0a506172562a18056bf5908cfd8e945a}} 
float \mbox{\hyperlink{_attitude_estimation_8c_a0a506172562a18056bf5908cfd8e945a}{sinc}} (float x)
\begin{DoxyCompactList}\small\item\em Sinc function that handles the case where x $\sim$= 0. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_attitude_estimation_8c_a62c793b0a2ba06d49a3140bc707d43d7}{integrate\+D\+CM}} (\mbox{\hyperlink{struct_a_c_s_type}{A\+C\+S\+Type}} $\ast$acs, float Kp\+\_\+mag, float Ki\+\_\+mag, float Kp\+\_\+sv, float Ki\+\_\+sv, float dt)
\begin{DoxyCompactList}\small\item\em Performs closed loop integration on the given D\+CM using the Rexp form. \end{DoxyCompactList}\item 
\mbox{\hyperlink{struct___matrix}{Matrix}} \mbox{\hyperlink{_attitude_estimation_8c_add41af68c335ef202f04c3c055ae5972}{initialize\+D\+CM}} (float yaw, float pitch, float roll)
\begin{DoxyCompactList}\small\item\em Allocates and initializes a 3x3 D\+CM Matrix. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_attitude_estimation_8c_a5aec64402f3df1a6482b514b354f46b0}{update\+Attitude\+Estimate}} (\mbox{\hyperlink{struct_a_c_s_type}{A\+C\+S\+Type}} $\ast$acs)
\begin{DoxyCompactList}\small\item\em Updates the craft attitude estimate using sensor data in acs. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_attitude_estimation_8c_ade543c963382408c5820da341714c3fc}{find\+Euler\+Angles}} (\mbox{\hyperlink{struct___matrix}{Matrix}} R, float $\ast$yaw\+\_\+pitch\+\_\+roll)
\begin{DoxyCompactList}\small\item\em Performs closed loop integration on the given D\+CM using the Rexp form. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
\+: Source file for the Attitud\+Estimation module. 

This module contains the code to run closed loop integration of the gyro using feedback from the magnetometer and solar vector.

See the header file for function descriptions.

Created by Galen Savidge. Edited 3/6/2019. 

\subsection{Function Documentation}
\mbox{\Hypertarget{_attitude_estimation_8c_ade543c963382408c5820da341714c3fc}\label{_attitude_estimation_8c_ade543c963382408c5820da341714c3fc}} 
\index{AttitudeEstimation.c@{AttitudeEstimation.c}!findEulerAngles@{findEulerAngles}}
\index{findEulerAngles@{findEulerAngles}!AttitudeEstimation.c@{AttitudeEstimation.c}}
\subsubsection{\texorpdfstring{findEulerAngles()}{findEulerAngles()}}
{\footnotesize\ttfamily void find\+Euler\+Angles (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct___matrix}{Matrix}}}]{R,  }\item[{float $\ast$}]{yaw\+\_\+pitch\+\_\+roll }\end{DoxyParamCaption})}



Performs closed loop integration on the given D\+CM using the Rexp form. 


\begin{DoxyParams}{Parameters}
{\em R} & the D\+CM (initialize to I3 before first use) \\
\hline
{\em yaw\+\_\+pitch\+\_\+roll} & pointer to float\mbox{[}3\mbox{]} which hold yaw (0) pitch (1) and roll (2) after the function returns \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}
\mbox{\Hypertarget{_attitude_estimation_8c_af3787f9ac84c74879bf0be115620c91b}\label{_attitude_estimation_8c_af3787f9ac84c74879bf0be115620c91b}} 
\index{AttitudeEstimation.c@{AttitudeEstimation.c}!findRexp@{findRexp}}
\index{findRexp@{findRexp}!AttitudeEstimation.c@{AttitudeEstimation.c}}
\subsubsection{\texorpdfstring{findRexp()}{findRexp()}}
{\footnotesize\ttfamily void find\+Rexp (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct___matrix}{Matrix}}}]{w,  }\item[{\mbox{\hyperlink{struct___matrix}{Matrix}}}]{Rexp }\end{DoxyParamCaption})}



Finds the exponential Rodrigues parameter form of an angular velocity vector. 


\begin{DoxyParams}{Parameters}
{\em w} & a 3x1 angular velocity column vector \\
\hline
{\em Rexp} & an allocated 3x3 Matrix to hold the exponential Matrix \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}
\mbox{\Hypertarget{_attitude_estimation_8c_add41af68c335ef202f04c3c055ae5972}\label{_attitude_estimation_8c_add41af68c335ef202f04c3c055ae5972}} 
\index{AttitudeEstimation.c@{AttitudeEstimation.c}!initializeDCM@{initializeDCM}}
\index{initializeDCM@{initializeDCM}!AttitudeEstimation.c@{AttitudeEstimation.c}}
\subsubsection{\texorpdfstring{initializeDCM()}{initializeDCM()}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct___matrix}{Matrix}} initialize\+D\+CM (\begin{DoxyParamCaption}\item[{float}]{yaw,  }\item[{float}]{pitch,  }\item[{float}]{roll }\end{DoxyParamCaption})}



Allocates and initializes a 3x3 D\+CM Matrix. 


\begin{DoxyParams}{Parameters}
{\em Euler} & angles for the initial D\+CM \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The new D\+CM Matrix 
\end{DoxyReturn}
\mbox{\Hypertarget{_attitude_estimation_8c_a62c793b0a2ba06d49a3140bc707d43d7}\label{_attitude_estimation_8c_a62c793b0a2ba06d49a3140bc707d43d7}} 
\index{AttitudeEstimation.c@{AttitudeEstimation.c}!integrateDCM@{integrateDCM}}
\index{integrateDCM@{integrateDCM}!AttitudeEstimation.c@{AttitudeEstimation.c}}
\subsubsection{\texorpdfstring{integrateDCM()}{integrateDCM()}}
{\footnotesize\ttfamily void integrate\+D\+CM (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_c_s_type}{A\+C\+S\+Type}} $\ast$}]{acs,  }\item[{float}]{Kp\+\_\+mag,  }\item[{float}]{Ki\+\_\+mag,  }\item[{float}]{Kp\+\_\+sv,  }\item[{float}]{Ki\+\_\+sv,  }\item[{float}]{dt }\end{DoxyParamCaption})}



Performs closed loop integration on the given D\+CM using the Rexp form. 


\begin{DoxyParams}{Parameters}
{\em acs} & an initialized A\+CS struct which has up-\/to-\/date sensor data \\
\hline
{\em K$\ast$} & feedback constants for the mag and solar vectors \\
\hline
{\em dt} & time in seconds since last call of this function \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}
\mbox{\Hypertarget{_attitude_estimation_8c_a5aec64402f3df1a6482b514b354f46b0}\label{_attitude_estimation_8c_a5aec64402f3df1a6482b514b354f46b0}} 
\index{AttitudeEstimation.c@{AttitudeEstimation.c}!updateAttitudeEstimate@{updateAttitudeEstimate}}
\index{updateAttitudeEstimate@{updateAttitudeEstimate}!AttitudeEstimation.c@{AttitudeEstimation.c}}
\subsubsection{\texorpdfstring{updateAttitudeEstimate()}{updateAttitudeEstimate()}}
{\footnotesize\ttfamily void update\+Attitude\+Estimate (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_c_s_type}{A\+C\+S\+Type}} $\ast$}]{acs }\end{DoxyParamCaption})}



Updates the craft attitude estimate using sensor data in acs. 


\begin{DoxyParams}{Parameters}
{\em acs} & an initialized A\+CS struct which has up-\/to-\/date sensor data \\
\hline
{\em dt} & time in seconds since last call of this function \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}
