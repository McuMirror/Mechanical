\hypertarget{_s_t_m32_serial_communication_8h}{}\section{C\+:/\+Users/galey/\+Documents/\+Mechanical/\+Mech\+\_\+\+Lib/\+S\+T\+M32\+Serial\+Communication.h File Reference}
\label{_s_t_m32_serial_communication_8h}\index{C:/Users/galey/Documents/Mechanical/Mech\_Lib/STM32SerialCommunication.h@{C:/Users/galey/Documents/Mechanical/Mech\_Lib/STM32SerialCommunication.h}}


\+: Send and receive data over serial  


{\ttfamily \#include \char`\"{}main.\+h\char`\"{}}\newline
{\ttfamily \#include $<$A\+C\+S.\+h$>$}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{_s_t_m32_serial_communication_8h_ada2e5bf03fac6669fcb8dd37890f57a6}{initialize\+A\+C\+S\+Serial}} (U\+A\+R\+T\+\_\+\+Handle\+Type\+Def $\ast$uart)
\begin{DoxyCompactList}\small\item\em Initializes serial communication from the A\+CS. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_s_t_m32_serial_communication_8h_a033eff7bc0e28e99f5898e1cc9866f9f}{sync\+With42}} (\mbox{\hyperlink{struct_a_c_s_type}{A\+C\+S\+Type}} $\ast$acs)
\begin{DoxyCompactList}\small\item\em Handles I/O with 42. Should be called at the beginning of every loop. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_s_t_m32_serial_communication_8h_ad072f619e7cd898708cb18f8046dddf4}{read\+Sensors\+From\+Serial}} (\mbox{\hyperlink{struct_a_c_s_type}{A\+C\+S\+Type}} $\ast$acs)
\begin{DoxyCompactList}\small\item\em Reads sensor data from serial and updates acs. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_s_t_m32_serial_communication_8h_abddb75ac826a5945edf2bd9d9e936aaf}{send\+Actuators\+To\+Serial}} (\mbox{\hyperlink{struct_a_c_s_type}{A\+C\+S\+Type}} $\ast$acs)
\begin{DoxyCompactList}\small\item\em Sends actuator P\+W\+Ms from acs over serial. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_s_t_m32_serial_communication_8h_ab6100f2f60bcdce42fbdf84f725c492a}{S\+T\+M32\+Serial\+Handshake}} (U\+A\+R\+T\+\_\+\+Handle\+Type\+Def $\ast$huart)
\begin{DoxyCompactList}\small\item\em Blocks until completing a handshake with 42. \end{DoxyCompactList}\item 
H\+A\+L\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{_s_t_m32_serial_communication_8h_aa2a2960d426562d89c6d7bd507cdeef4}{S\+T\+M32\+Serial\+Send\+Floats}} (U\+A\+R\+T\+\_\+\+Handle\+Type\+Def $\ast$huart, float $\ast$f, unsigned int n)
\begin{DoxyCompactList}\small\item\em Blocking function to send a set of n floating point numbers over serial. \end{DoxyCompactList}\item 
H\+A\+L\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{_s_t_m32_serial_communication_8h_ab0db882d01f9a8d3fc767b7443effbff}{S\+T\+M32\+Serial\+Send\+String}} (U\+A\+R\+T\+\_\+\+Handle\+Type\+Def $\ast$huart, char $\ast$string)
\begin{DoxyCompactList}\small\item\em Blocking function to send a string over serial. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{_s_t_m32_serial_communication_8h_a0915517c1034bd40430b88a147d30776}{S\+T\+M32\+Serial\+Receive\+Floats}} (U\+A\+R\+T\+\_\+\+Handle\+Type\+Def $\ast$huart, float $\ast$f, unsigned int n)
\begin{DoxyCompactList}\small\item\em Blocking function to receive a set of n floating point numbers from serial. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_s_t_m32_serial_communication_8h_a822aae6b64d253b9a112dcb649ee547d}{print\+To42}} (char $\ast$str)
\begin{DoxyCompactList}\small\item\em Prints str to 42 on the next call of \mbox{\hyperlink{_s_t_m32_serial_communication_8h_a033eff7bc0e28e99f5898e1cc9866f9f}{sync\+With42()}} \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
\+: Send and receive data over serial 

This module handles U\+A\+RT communication with the flight simulation running on a Linux P\+C/\+VM.

Created by Galen Savidge. Edited 4/13/2019. 

\subsection{Function Documentation}
\mbox{\Hypertarget{_s_t_m32_serial_communication_8h_ada2e5bf03fac6669fcb8dd37890f57a6}\label{_s_t_m32_serial_communication_8h_ada2e5bf03fac6669fcb8dd37890f57a6}} 
\index{STM32SerialCommunication.h@{STM32SerialCommunication.h}!initializeACSSerial@{initializeACSSerial}}
\index{initializeACSSerial@{initializeACSSerial}!STM32SerialCommunication.h@{STM32SerialCommunication.h}}
\subsubsection{\texorpdfstring{initializeACSSerial()}{initializeACSSerial()}}
{\footnotesize\ttfamily void initialize\+A\+C\+S\+Serial (\begin{DoxyParamCaption}\item[{U\+A\+R\+T\+\_\+\+Handle\+Type\+Def $\ast$}]{uart }\end{DoxyParamCaption})}



Initializes serial communication from the A\+CS. 


\begin{DoxyParams}{Parameters}
{\em acs} & a pointer to an existing Attitude Control System object \\
\hline
{\em huart} & pointer to a U\+A\+RT handle defined in main.\+c \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}
\mbox{\Hypertarget{_s_t_m32_serial_communication_8h_a822aae6b64d253b9a112dcb649ee547d}\label{_s_t_m32_serial_communication_8h_a822aae6b64d253b9a112dcb649ee547d}} 
\index{STM32SerialCommunication.h@{STM32SerialCommunication.h}!printTo42@{printTo42}}
\index{printTo42@{printTo42}!STM32SerialCommunication.h@{STM32SerialCommunication.h}}
\subsubsection{\texorpdfstring{printTo42()}{printTo42()}}
{\footnotesize\ttfamily void print\+To42 (\begin{DoxyParamCaption}\item[{char $\ast$}]{str }\end{DoxyParamCaption})}



Prints str to 42 on the next call of \mbox{\hyperlink{_s_t_m32_serial_communication_8h_a033eff7bc0e28e99f5898e1cc9866f9f}{sync\+With42()}} 


\begin{DoxyParams}{Parameters}
{\em acs} & a pointer to an existing Attitude Control System object \\
\hline
{\em str} & string to print \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Updates printstring in acs 
\end{DoxyReturn}
\mbox{\Hypertarget{_s_t_m32_serial_communication_8h_ad072f619e7cd898708cb18f8046dddf4}\label{_s_t_m32_serial_communication_8h_ad072f619e7cd898708cb18f8046dddf4}} 
\index{STM32SerialCommunication.h@{STM32SerialCommunication.h}!readSensorsFromSerial@{readSensorsFromSerial}}
\index{readSensorsFromSerial@{readSensorsFromSerial}!STM32SerialCommunication.h@{STM32SerialCommunication.h}}
\subsubsection{\texorpdfstring{readSensorsFromSerial()}{readSensorsFromSerial()}}
{\footnotesize\ttfamily void read\+Sensors\+From\+Serial (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_c_s_type}{A\+C\+S\+Type}} $\ast$}]{acs }\end{DoxyParamCaption})}



Reads sensor data from serial and updates acs. 


\begin{DoxyParams}{Parameters}
{\em acs} & a pointer to an existing Attitude Control System object \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Updates mag\+\_\+vector, gyro\+\_\+vector, solar\+\_\+vector, \& clears printstring in acs 
\end{DoxyReturn}
\mbox{\Hypertarget{_s_t_m32_serial_communication_8h_abddb75ac826a5945edf2bd9d9e936aaf}\label{_s_t_m32_serial_communication_8h_abddb75ac826a5945edf2bd9d9e936aaf}} 
\index{STM32SerialCommunication.h@{STM32SerialCommunication.h}!sendActuatorsToSerial@{sendActuatorsToSerial}}
\index{sendActuatorsToSerial@{sendActuatorsToSerial}!STM32SerialCommunication.h@{STM32SerialCommunication.h}}
\subsubsection{\texorpdfstring{sendActuatorsToSerial()}{sendActuatorsToSerial()}}
{\footnotesize\ttfamily void send\+Actuators\+To\+Serial (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_c_s_type}{A\+C\+S\+Type}} $\ast$}]{acs }\end{DoxyParamCaption})}



Sends actuator P\+W\+Ms from acs over serial. 


\begin{DoxyParams}{Parameters}
{\em acs} & a pointer to an existing Attitude Control System object \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}
\mbox{\Hypertarget{_s_t_m32_serial_communication_8h_ab6100f2f60bcdce42fbdf84f725c492a}\label{_s_t_m32_serial_communication_8h_ab6100f2f60bcdce42fbdf84f725c492a}} 
\index{STM32SerialCommunication.h@{STM32SerialCommunication.h}!STM32SerialHandshake@{STM32SerialHandshake}}
\index{STM32SerialHandshake@{STM32SerialHandshake}!STM32SerialCommunication.h@{STM32SerialCommunication.h}}
\subsubsection{\texorpdfstring{STM32SerialHandshake()}{STM32SerialHandshake()}}
{\footnotesize\ttfamily void S\+T\+M32\+Serial\+Handshake (\begin{DoxyParamCaption}\item[{U\+A\+R\+T\+\_\+\+Handle\+Type\+Def $\ast$}]{huart }\end{DoxyParamCaption})}



Blocks until completing a handshake with 42. 


\begin{DoxyParams}{Parameters}
{\em huart} & pointer to a U\+A\+RT handle made by cube\+MX \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}
\mbox{\Hypertarget{_s_t_m32_serial_communication_8h_a0915517c1034bd40430b88a147d30776}\label{_s_t_m32_serial_communication_8h_a0915517c1034bd40430b88a147d30776}} 
\index{STM32SerialCommunication.h@{STM32SerialCommunication.h}!STM32SerialReceiveFloats@{STM32SerialReceiveFloats}}
\index{STM32SerialReceiveFloats@{STM32SerialReceiveFloats}!STM32SerialCommunication.h@{STM32SerialCommunication.h}}
\subsubsection{\texorpdfstring{STM32SerialReceiveFloats()}{STM32SerialReceiveFloats()}}
{\footnotesize\ttfamily int S\+T\+M32\+Serial\+Receive\+Floats (\begin{DoxyParamCaption}\item[{U\+A\+R\+T\+\_\+\+Handle\+Type\+Def $\ast$}]{huart,  }\item[{float $\ast$}]{f,  }\item[{unsigned int}]{n }\end{DoxyParamCaption})}



Blocking function to receive a set of n floating point numbers from serial. 


\begin{DoxyParams}{Parameters}
{\em huart} & pointer to a U\+A\+RT handle made by cube\+MX \\
\hline
{\em f} & an array of floats of size $>$= n \\
\hline
{\em n} & the number of floats to receive \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Always 0 for now 
\end{DoxyReturn}
\mbox{\Hypertarget{_s_t_m32_serial_communication_8h_aa2a2960d426562d89c6d7bd507cdeef4}\label{_s_t_m32_serial_communication_8h_aa2a2960d426562d89c6d7bd507cdeef4}} 
\index{STM32SerialCommunication.h@{STM32SerialCommunication.h}!STM32SerialSendFloats@{STM32SerialSendFloats}}
\index{STM32SerialSendFloats@{STM32SerialSendFloats}!STM32SerialCommunication.h@{STM32SerialCommunication.h}}
\subsubsection{\texorpdfstring{STM32SerialSendFloats()}{STM32SerialSendFloats()}}
{\footnotesize\ttfamily H\+A\+L\+\_\+\+Status\+Type\+Def S\+T\+M32\+Serial\+Send\+Floats (\begin{DoxyParamCaption}\item[{U\+A\+R\+T\+\_\+\+Handle\+Type\+Def $\ast$}]{huart,  }\item[{float $\ast$}]{f,  }\item[{unsigned int}]{n }\end{DoxyParamCaption})}



Blocking function to send a set of n floating point numbers over serial. 


\begin{DoxyParams}{Parameters}
{\em huart} & pointer to a U\+A\+RT handle made by cube\+MX \\
\hline
{\em f} & an array of floats of size $>$= n \\
\hline
{\em n} & the number of floats to be sent \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
H\+AL status of the transmission 
\end{DoxyReturn}
\mbox{\Hypertarget{_s_t_m32_serial_communication_8h_ab0db882d01f9a8d3fc767b7443effbff}\label{_s_t_m32_serial_communication_8h_ab0db882d01f9a8d3fc767b7443effbff}} 
\index{STM32SerialCommunication.h@{STM32SerialCommunication.h}!STM32SerialSendString@{STM32SerialSendString}}
\index{STM32SerialSendString@{STM32SerialSendString}!STM32SerialCommunication.h@{STM32SerialCommunication.h}}
\subsubsection{\texorpdfstring{STM32SerialSendString()}{STM32SerialSendString()}}
{\footnotesize\ttfamily H\+A\+L\+\_\+\+Status\+Type\+Def S\+T\+M32\+Serial\+Send\+String (\begin{DoxyParamCaption}\item[{U\+A\+R\+T\+\_\+\+Handle\+Type\+Def $\ast$}]{huart,  }\item[{char $\ast$}]{string }\end{DoxyParamCaption})}



Blocking function to send a string over serial. 


\begin{DoxyParams}{Parameters}
{\em huart} & pointer to a U\+A\+RT handle made by cube\+MX \\
\hline
{\em string} & a null terminated string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
H\+AL status of the transmission 
\end{DoxyReturn}
\mbox{\Hypertarget{_s_t_m32_serial_communication_8h_a033eff7bc0e28e99f5898e1cc9866f9f}\label{_s_t_m32_serial_communication_8h_a033eff7bc0e28e99f5898e1cc9866f9f}} 
\index{STM32SerialCommunication.h@{STM32SerialCommunication.h}!syncWith42@{syncWith42}}
\index{syncWith42@{syncWith42}!STM32SerialCommunication.h@{STM32SerialCommunication.h}}
\subsubsection{\texorpdfstring{syncWith42()}{syncWith42()}}
{\footnotesize\ttfamily void sync\+With42 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_c_s_type}{A\+C\+S\+Type}} $\ast$}]{acs }\end{DoxyParamCaption})}



Handles I/O with 42. Should be called at the beginning of every loop. 


\begin{DoxyParams}{Parameters}
{\em acs} & a pointer to an existing Attitude Control System object \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Updates mag\+\_\+vector, gyro\+\_\+vector, and solar\+\_\+vector in acs 
\end{DoxyReturn}
