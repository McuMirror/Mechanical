<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SlugSat ACS: Attiude Determination Testing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SlugSat ACS
   &#160;<span id="projectnumber">0.2.0</span>
   </div>
   <div id="projectbrief">This repository contains source code for the Attitude Control System (ACS) onboard SlugSat.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('attitude_determination.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Attiude Determination Testing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Sensor Test Fixture</h2>
<p>The test fixture is used to prototype and test the accuracy of SlugSat's solar vector determination and overall attitude determination algorithms. The fixture hardware is a combination of four parts: an internal 2U chassis, a 3-axis gimbal, a Helmholtz coil, a dark box known within our team as the "bird box." The 2U chassis fits inside the gimbal to form the gimbal assembly. This assembly sits within the Helmholtz coil, which in turn sits inside of the bird box. The Helmholtz coil is used to adjust the magnetic field inside of the test fixture, while a lamp is used in conjunction with the bird box to simulate light from the Sun. The hardware is meant to be used with embedded software designed to run on the fixture's microcontroller (a NUCLEO-F103RB) and in parallel with data analysis software on the adjacent workstation.</p>
<img src="../assets/birdbox_inside_labeled.jpg" style="max-width:45%" alt="" class="inline"/>
 <img src="../assets/birdbox_workstation_labeled.jpg" style="max-width:45%" alt="" class="inline"/>
 <h2>Setup &amp; Operation</h2>
<ol type="1">
<li>Set the lamp on the desk about 6' away from the bird box. Make sure the lamp is at about the same height as the center of the gimbal and nothing is blocking the light shining on the 2U chassis.</li>
<li>Optionally, connect the Helmholtz coil to the power supply and turn configure the power supply to output about 3.3V. The current flowing should be about 1A.</li>
<li>Rotate the gimbal so that the 2U's Z+ face is up and its X+ face is pointing towards the lamp.</li>
<li>Connect the microcontroller in the middle of the 2U chassis in the sensor test fixture to a PC over USB.</li>
<li>Open the Attitude_Estimation project and make sure PRINT_DCM is the only thing defined on lines 35-38 of main.c. Compile the project and program the microcontroller.</li>
<li>Open display_attitude.m in Matlab and run it.</li>
<li>Verify that the gimbal is rotated correctly (see step 3), and then reset the microcontroller. Matlab should render the estimated attitude.</li>
</ol>
<h2>Measuring Euler Angles</h2>
<p>The light marks on the base of the Helmholtz coil are meant to help measure yaw and calibrate angle of incidence. The gimbal should be placed such that its front legs are on top of the large 45 degree marks on the base (equadistant from the 1" foamcore piece at the front of the Helmholtz coil base). The lamp should be moved so that the shadow from the foamcore piece points at the center of the gimbal base. Yaw can then be measured by comparing the position of the mid-sized gimbal ring to the lines on the base using a ruler or other right angled straight edge. Pitch and roll can be measured using a protractor. These measurement methods are painstaking and not very reliable, so a better method will likely have to be developed.</p>
<h2>Tips &amp; Tricks</h2>
<p>Tighten the nuts on the gimbal joints if more friction is desired. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
